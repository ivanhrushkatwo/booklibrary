{% extends "base_generic.html" %}

{% load imagefit %}


{% block content %}
    {% if books %}
        <div class="col s10 m6">
            <div class="card blue-grey darken-5">
                <div class="card-content white-text">
                    <span class="card-title"><strong>Price: {{ price }}$</strong></span>
                    <p>In your basket {{ num_of_book }} {% if num_of_book == 1 %} book. {% else %} books.
                    {% endif %}
                    <ul>
                        {% for book in books %}
                            <li>One {{ book.title }} = {{ book.price }} $</li>
                        {% endfor %}
                    </ul>
                    </p>
                </div>
                <div class="card-action">
                   <a class="waves-effect waves-light btn" href="#"><i class="material-icons left">shopping_cart</i>
                       Buy this
                       {% if num_of_book == 1 %}
                            book
                       {% else %}
                           books
                       {% endif %}
                   </a>
                   <a href="{% url "clear_basket" %}">Clear basket</a>
                </div>
            </div>
        </div>

    <div class="row">
    {% for book in books %}

    <div class="col s12 m6 book-id-{{ book.id }} not-empty">
        <div class="card horizontal blue-grey lighten-5">
            <div class="card-image">
                {% if book.image %}
                    <img class="responsive-img" src="{{ book.image.url|resize:"128x128" }}" alt="">
                {% else %}
                    <img class="responsive-img" src="{{ "/media/std_image/book_std_png.png"|resize:"128x128" }}">
                {% endif %}
            </div>
            <div class="card-stacked">
                <div class="card-content">
                    <a href="{{ book.get_absolute_url }}">{{ book.title }}</a>
                    <p><strong>Author:</strong> {{book.author}}</p>
                    <p><strong>Category:</strong> {{book.category }}</p>
                    <p><label for="count_book"><strong>Count</strong></label></p>
                    <!-- TODO need add function -->
                    <div style="display: inline;">-</div>
                        <input id="count_book" pattern="[0-9]*" type="number" name="" value="{{ book.c }}" style="width: 32px; text-align: center">
                    <div style="display: inline;">+</div>
                </div>
                <div class="card-action">
                    <input type="submit" class="btn del-book-id" value="Delete from basket" data-id="{{ book.id }}">
{#                    <a href="{% url "delete_from_basket" book.id %}">Delete from basket</a>#}
                </div>
            </div>
        </div>
    </div>
    {% endfor %}

    </div>

    {% else %}
        <div class="col s12 m7">
            <div class="card horizontal">
                <div class="card-image">
                    <img class="responsive-img" src="{{ "/media/std_image/empty_basket.png"|resize:"256x256" }}">
                </div>
                <div class="card-stacked">
                    <div class="card-content">
                        <h1 class="header">Your basket is empty</h1>
                        <p>Your basket is empty now. <br>
                            You can go to the section with <a href="{% url "books" %}">books</a>  and add them to your basket.
                        </p>
                    </div>
                    <div class="card-action">
                        <a class="waves-effect waves-light btn" href="{% url "books" %}"><i class="material-icons left">shopping_cart</i>Buy some book</a>
                    </div>
                </div>
            </div>
        </div>
    {% endif %}

{% endblock %}